Keyserver Configuration
-----------------------

This is the keyserver for Keyless SSL. It consists of a single binary
file 'kssl_server' that has the following command-line options:

    --port
              The TCP port on which to listen for connections. These
              connections must be TLSv1.2.

     --ip     
              (optional) The IP address of the interface to bind to.
              If missing binds to all available interfaces.
    
     --ca-file

              Path to a PEM-encoded file containing the CA certificate
              used to sign client certificates presented on connection.

    --server-cert
    --server-key

              Path to PEM-encoded files containing the certificate and
              private key that are used when a connection is made to the
              server. These must be signed by an authority that the client
              side recognizes (e.g. the same CA as --ca-file).

    --cipher-list

              An OpenSSL list of ciphers that the TLS server will accept
              for connections. e.g. ECDHE-RSA-AES128-SHA256:RC4:HIGH:!MD5

    --private-key-directory

              Path to a directory containing private keys which the keyserver
              provides decoding service against. The key files must end with
              ".key" and be PEM-encoded. There should be no trailing / on 
              the path.

    --silent
              Prevents keyserver from producing any log output. Fatal
              start up errors are sent to stderr.

    --verbose 

              Enables verbose logging. When enabled access log data is
              sent to the logger as well as errors.

    --num-workers

              (optional) The number of worker threads to start. Each worker
              thread will handle a single connection from a KSSL client. 
              Defaults to 1.

    --pid-file

              (optional) Path to a file into which the PID of the keyserver.
              This file is only written if the keyserver starts successfully.


The following options are not available on Windows systems:

    --user

            (optional) user:group to switch to. Can be in the form user:group
            or just user (in which case user:user is implied) (root only)

    --daemon

            (optional) Forks and abandons the parent process.

    --syslog

            (optional) Log lines are sent to syslog (instead of stdout
            or stderr). 

For example,

    keyserver --port=24008                       \
              --server-cert=server-cert/cert.pem \
              --server-key=server-cert/key.pem   \
              --private-key-directory=keys       \
              --cipher-list=ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH \
              --ca-file=CA/cacert.pem            \
              --pid-file=keyserver.pid

Makefile Targets
----------------

The Makefile has the following useful targets:

    all     The default target that builds both the keyserver and
            the testclient

    clean   Deletes the keyserver, testclient and related object files

    run     Runs the keyserver with a configuration suitable for testing
            (with the testclient)

    kill    Stops the keyserver started by 'make run'

    test    Runs the testclient against the keyserver.
